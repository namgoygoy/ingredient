# Cosmetic - AI-Powered Cosmetic Ingredient Analyzer

![Android](https://img.shields.io/badge/Android-3DDC84?style=for-the-badge&logo=android&logoColor=white)
![Kotlin](https://img.shields.io/badge/Kotlin-0095D5?style=for-the-badge&logo=kotlin&logoColor=white)
![Python](https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=python&logoColor=white)
![FastAPI](https://img.shields.io/badge/FastAPI-005571?style=for-the-badge&logo=fastapi)
![Supabase](https://img.shields.io/badge/Supabase-181818?style=for-the-badge&logo=supabase&logoColor=white)
![ChromaDB](https://img.shields.io/badge/ChromaDB-FF6B6B?style=for-the-badge)
![Gemini AI](https://img.shields.io/badge/Gemini-AI-4285F4?style=for-the-badge&logo=google&logoColor=white)

## One-line Summary

ìŠ¤ë§ˆíŠ¸í° ì¹´ë©”ë¼ë¡œ í™”ì¥í’ˆ ì„±ë¶„í‘œë¥¼ ì´¬ì˜í•˜ë©´, RAG ê¸°ë°˜ AIê°€ 11,000ê°œ ì´ìƒì˜ ê²€ì¦ëœ ì„±ë¶„ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ì‚¬ìš©ì í”¼ë¶€ íƒ€ì…ì— ë§ëŠ” ë§ì¶¤í˜• ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” Android ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.

---

## ğŸ¤ Demo

[ì—¬ê¸°ì— ë°ëª¨ ì˜ìƒ ì²¨ë¶€]

---

## ğŸ“– Description

**Cosmetic**ì€ í™”ì¥í’ˆ ì„±ë¶„í‘œë¥¼ ì¹´ë©”ë¼ë¡œ ì´¬ì˜í•˜ì—¬ AIê°€ ë¶„ì„í•˜ëŠ” ëª¨ë°”ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤. ML Kitì˜ í•œê¸€ OCR ê¸°ìˆ ì„ í™œìš©í•˜ì—¬ ì„±ë¶„í‘œë¥¼ ìë™ìœ¼ë¡œ ì¸ì‹í•˜ê³ , RAG(Retrieval-Augmented Generation) ê¸°ë°˜ ë°±ì—”ë“œ ì‹œìŠ¤í…œì´ 11,000ê°œ ì´ìƒì˜ ê²€ì¦ëœ ì„±ë¶„ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ê²€ìƒ‰í•˜ì—¬ ì •í™•í•œ ë¶„ì„ ê²°ê³¼ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

ì‚¬ìš©ìëŠ” ìì‹ ì˜ í”¼ë¶€ íƒ€ì…(ê±´ì„±, ì§€ì„±, ë¯¼ê°ì„±, ì—¬ë“œë¦„ì„± ë“±)ì„ ì„¤ì •í•˜ë©´, ê° ì„±ë¶„ì´ í•´ë‹¹ í”¼ë¶€ íƒ€ì…ì— ì¢‹ì€ ì„±ë¶„ì¸ì§€ ì£¼ì˜ê°€ í•„ìš”í•œ ì„±ë¶„ì¸ì§€ ìë™ìœ¼ë¡œ ë¶„ë¥˜í•˜ì—¬ í‘œì‹œí•©ë‹ˆë‹¤. ë˜í•œ ê°œë³„ ì„±ë¶„ì„ í´ë¦­í•˜ë©´ ìƒì„¸í•œ ê¸°ëŠ¥(purpose), í”¼ë¶€ íƒ€ì… ì í•©ì„±, ê³¼í•™ì  ê·¼ê±°ê°€ ë‹´ê¸´ ì„¤ëª…ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Why This Project?

**Key Differentiators**

ê¸°ì¡´ í™”ì¥í’ˆ ì„±ë¶„ ë¶„ì„ ì„œë¹„ìŠ¤ë“¤ì€ ëŒ€ë¶€ë¶„ ìˆ˜ë™ìœ¼ë¡œ ì„±ë¶„ì„ ì…ë ¥í•´ì•¼ í•˜ê±°ë‚˜, ì œí•œì ì¸ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì¸í•´ ì •í™•ë„ê°€ ë–¨ì–´ì§€ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. **Cosmetic**ì€ ë‹¤ìŒê³¼ ê°™ì€ ì°¨ë³„ì ì„ ì œê³µí•©ë‹ˆë‹¤:

1. **ì›ìŠ¤í†± í¸ì˜ì„±**: ìŠ¤ë§ˆíŠ¸í° ì¹´ë©”ë¼ë¡œ ì„±ë¶„í‘œë¥¼ ì´¬ì˜í•˜ê¸°ë§Œ í•˜ë©´ ìë™ìœ¼ë¡œ ë¶„ì„ì´ ì™„ë£Œë©ë‹ˆë‹¤. ë³µì¡í•œ ì…ë ¥ ê³¼ì • ì—†ì´ ì¦‰ì‹œ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

2. **RAG ê¸°ë°˜ ì •í™•ì„±**: ì¼ë°˜ì ì¸ LLM ê¸°ë°˜ ì„œë¹„ìŠ¤ì™€ ë‹¬ë¦¬, RAG(Retrieval-Augmented Generation) ì•„í‚¤í…ì²˜ë¥¼ ì±„íƒí•˜ì—¬ ê²€ì¦ëœ 11,000ê°œ ì´ìƒì˜ ì„±ë¶„ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì§ì ‘ ê²€ìƒ‰í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ í• ë£¨ì‹œë„¤ì´ì…˜ ì—†ì´ ì •í™•í•˜ê³  ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

3. **í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ ì‹œìŠ¤í…œ**: Supabase PostgreSQLê³¼ ChromaDB ë²¡í„° ìŠ¤í† ì–´ë¥¼ ê²°í•©í•œ í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ìœ¼ë¡œ, ì •í™•í•œ í‚¤ì›Œë“œ ë§¤ì¹­ê³¼ ì˜ë¯¸ ê¸°ë°˜ ìœ ì‚¬ë„ ê²€ìƒ‰ì„ ë™ì‹œì— ì§€ì›í•©ë‹ˆë‹¤. Supabase ì—°ê²° ì‹¤íŒ¨ ì‹œ JSON íŒŒì¼ë¡œ ìë™ í´ë°±í•˜ì—¬ ì•ˆì •ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤.

4. **ì§€ëŠ¥í˜• ë³´ì™„ ì‹œìŠ¤í…œ**: RAG ì„œë²„ê°€ ì£¼ìš” ë¶„ì„ ì—”ì§„ìœ¼ë¡œ ë™ì‘í•˜ë©°, ì •ë³´ê°€ ë¶€ì¡±í•œ ê²½ìš°ì—ë§Œ Gemini AIë¥¼ ë³´ì™„ ì—”ì§„ìœ¼ë¡œ í™œìš©í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ API ë¹„ìš©ì„ ìµœì†Œí™”í•˜ë©´ì„œë„ ì™„ì „í•œ ì •ë³´ ì œê³µì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

5. **í”¼ë¶€ íƒ€ì…ë³„ ë§ì¶¤ ë¶„ì„**: ë‹¨ìˆœíˆ ì„±ë¶„ì„ ë‚˜ì—´í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì‚¬ìš©ìì˜ í”¼ë¶€ íƒ€ì…ì„ ê¸°ë°˜ìœ¼ë¡œ ê° ì„±ë¶„ì˜ `good_for`ì™€ `bad_for` ì†ì„±ì„ ë¶„ì„í•˜ì—¬ ê°œì¸í™”ëœ í‰ê°€ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

---

## ğŸ”¨ System Architecture

[ì—¬ê¸°ì— ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨ ì²¨ë¶€]

---

## Logic Flow (Sequence Diagram)

<div align="center">
  <img width="845" height="629" alt="imageì‹œí€¸ìŠ¤" src="https://github.com/user-attachments/assets/04f2919a-2e44-45f5-8780-97f118d5c1dc" />
</div>

---

## API Endpoints

- **URL:** `/analyze_product`
- **Method:** `POST`
- **Content-Type:** `application/json`

### 1. Request (ìš”ì²­)

**JSON Body Example**

```json
{
  "ingredients": ["ì •ì œìˆ˜", "ê¸€ë¦¬ì„¸ë¦°", "íˆì•Œë£¨ë¡ ì‚°", "ë‹ˆì•„ì‹ ì•„ë§ˆì´ë“œ"],
  "skin_type": "ê±´ì„±"
}
```

### 2. Response (ì‘ë‹µ)

**Status: 200 OK**

**JSON Body Example**

```json
{
  "analysis_report": "ì´ í™”ì¥í’ˆì€(ëŠ”) 'ë³´ìŠµ'ì— ì¤‘ì ì„ ë‘” ì œí’ˆìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤...",
  "good_matches": [
    {
      "name": "íˆì•Œë£¨ë¡ ì‚°",
      "purpose": "ë³´ìŠµì œ"
    }
  ],
  "bad_matches": [
    {
      "name": "ì•Œì½”ì˜¬",
      "description": "ê±´ì„± í”¼ë¶€ì— ê±´ì¡°ë¥¼ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"
    }
  ],
  "success": true
}
```

### ìƒì„¸ ë¬¸ì„œ
[EndPoint.pdf](https://github.com/user-attachments/files/24192548/EndPoint.pdf)

---

## ğŸ”§ Stack

| Category | Technology |
| :--- | :--- |
| **Android** | **Kotlin**, Android SDK, MVVM, Coroutines, CameraX, ML Kit (OCR) |
| **Backend** | **Python (FastAPI)**, LangChain, Supabase (PostgreSQL), ChromaDB |
| **AI / ML** | **Google Gemini 2.5 Flash**, Sentence Transformers, HuggingFace Embeddings |
| **Tools** | Swagger UI, Retrofit2, OkHttp3, ngrok |

---

## ğŸ“‚ Project Structure

```
cosmetic/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”‚   â”œâ”€â”€ java/com/example/cosmetic/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MainActivity.kt              # ë©”ì¸ ì•¡í‹°ë¹„í‹°, ë°”í…€ ë„¤ë¹„ê²Œì´ì…˜
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ScanFragment.kt             # ì¹´ë©”ë¼ ì´¬ì˜ ë° OCR
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ResultsFragment.kt          # ë¶„ì„ ê²°ê³¼ í‘œì‹œ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DetailsFragment.kt          # ì œí’ˆ ìƒì„¸ ë¶„ì„
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProfileFragment.kt           # í”„ë¡œí•„ í™”ë©´
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SkinTypeActivity.kt          # í”¼ë¶€ íƒ€ì… ì„ íƒ (ì˜¨ë³´ë”©)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GeminiService.kt            # Gemini AI í†µí•©
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ IngredientParser.kt         # ì„±ë¶„ íŒŒì‹± ë¡œì§
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SharedViewModel.kt           # Fragment ê°„ ë°ì´í„° ê³µìœ 
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserPreferences.kt          # ì‚¬ìš©ì ì„¤ì • ê´€ë¦¬
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Constants.kt                # ì•± ì „ì—­ ìƒìˆ˜
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AppConfig.kt             # ì•± ì„¤ì • ê´€ë¦¬
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ network/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RAGApiService.kt        # Retrofit API ì¸í„°í˜ì´ìŠ¤
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RetrofitClient.kt       # Retrofit í´ë¼ì´ì–¸íŠ¸ ì„¤ì •
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AnalyzeProductModels.kt  # API ìš”ì²­/ì‘ë‹µ ëª¨ë¸
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ repository/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ProductAnalysisRepository.kt  # ì œí’ˆ ë¶„ì„ Repository
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ IngredientCache.kt      # ì„±ë¶„ ìºì‹œ ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ LoadingAnimationHelper.kt  # ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ í—¬í¼
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ SkinTypeExtractor.kt     # í”¼ë¶€ íƒ€ì… ì¶”ì¶œ ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”‚   â”œâ”€â”€ res/                            # ë¦¬ì†ŒìŠ¤ íŒŒì¼ (ë ˆì´ì•„ì›ƒ, ì´ë¯¸ì§€ ë“±)
â”‚   â”‚   â”‚   â””â”€â”€ assets/
â”‚   â”‚   â”‚       â””â”€â”€ ingredients.json           # ì„±ë¶„ ë°ì´í„°ë² ì´ìŠ¤ (11,000+ í•­ëª©)
â”‚   â”‚   â”œâ”€â”€ test/                               # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
â”‚   â”‚   â””â”€â”€ androidTest/                        # Android í†µí•© í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ build.gradle.kts                        # ì•± ë¹Œë“œ ì„¤ì •
â”‚   â””â”€â”€ proguard-rules.pro                      # ProGuard ê·œì¹™
â”‚
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ api/                                    # API ë¼ìš°í„° ë° ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ models.py                           # Pydantic ëª¨ë¸ ì •ì˜
â”‚   â”‚   â””â”€â”€ routes.py                           # FastAPI ë¼ìš°í„°
â”‚   â”œâ”€â”€ rag/                                    # RAG ì‹œìŠ¤í…œ í•µì‹¬ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ data_loader.py                      # ë°ì´í„° ë¡œë” (Supabase/JSON)
â”‚   â”‚   â”œâ”€â”€ enterprise_rag.py                   # Enterprise RAG í´ë˜ìŠ¤
â”‚   â”‚   â”œâ”€â”€ ingredient_search.py                 # ì„±ë¶„ ê²€ìƒ‰ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ memory.py                           # ëŒ€í™” ë©”ëª¨ë¦¬ ê´€ë¦¬
â”‚   â”‚   â””â”€â”€ vector_store.py                     # ChromaDB ë²¡í„° ìŠ¤í† ì–´
â”‚   â”œâ”€â”€ llm/                                    # LLM ê´€ë ¨ í´ë˜ìŠ¤
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ mock_llm.py                         # Mock LLM êµ¬í˜„
â”‚   â”œâ”€â”€ rag_server_supabase.py                  # FastAPI ë©”ì¸ ì„œë²„
â”‚   â”œâ”€â”€ supabase_client.py                      # Supabase í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ migrate_to_supabase.py                  # Supabase ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ SUPABASE_SETUP.sql                      # ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
â”‚   â”œâ”€â”€ requirements.txt                        # Python ì˜ì¡´ì„±
â”‚   â”œâ”€â”€ start_server.sh                         # ê°œë°œ ì„œë²„ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ start_server_supabase.sh                # Supabase ì—°ë™ ì„œë²„ ì‹¤í–‰
â”‚   â”œâ”€â”€ start_server_prod.sh                   # í”„ë¡œë•ì…˜ ì„œë²„ ì‹¤í–‰
â”‚   â”œâ”€â”€ chroma_db_ingredients/                  # ChromaDB ë²¡í„° ìŠ¤í† ì–´ ë””ë ‰í† ë¦¬
â”‚   â””â”€â”€ venv/                                   # Python ê°€ìƒ í™˜ê²½
â”‚
â”œâ”€â”€ gradle/                                     # Gradle Wrapper
â”‚   â”œâ”€â”€ libs.versions.toml                      # ì˜ì¡´ì„± ë²„ì „ ê´€ë¦¬
â”‚   â””â”€â”€ wrapper/
â”‚       â”œâ”€â”€ gradle-wrapper.jar
â”‚       â””â”€â”€ gradle-wrapper.properties
â”œâ”€â”€ build.gradle.kts                            # í”„ë¡œì íŠ¸ ë¹Œë“œ ì„¤ì •
â”œâ”€â”€ settings.gradle.kts                         # í”„ë¡œì íŠ¸ ì„¤ì •
â”œâ”€â”€ gradle.properties                           # Gradle ì†ì„±
â”œâ”€â”€ local.properties                            # ë¡œì»¬ ì„¤ì • (API í‚¤ ë“±, .gitignore)
â”œâ”€â”€ ARCHITECTURE.md                             # ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë¬¸ì„œ
â”œâ”€â”€ SETUP_GUIDE.md                              # ì„¤ì • ê°€ì´ë“œ ë¬¸ì„œ
â””â”€â”€ README.md                                   # í”„ë¡œì íŠ¸ README
```

---
# ì‹¤í–‰ ë° ì„¤ì • ê°€ì´ë“œ (Setup & Run)

### 1. ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰ (Backend)
ê°€ìƒ í™˜ê²½ í™œì„±í™” í›„ Supabase ì—°ë™ ì„œë²„ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. (ê¸°ë³¸ í¬íŠ¸: `5000`)

```bash
cd backend
source venv/bin/activate
python rag_server_supabase.py  # ë˜ëŠ” ./start_server_supabase.sh
```

### 2. ì•ˆë“œë¡œì´ë“œ ì—°ë™ ì„¤ì • (Configuration)
ëª¨ë°”ì¼ ê¸°ê¸°ì—ì„œ ë¡œì»¬ ì„œë²„ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ ngrokì„ ì‚¬ìš©í•˜ê±°ë‚˜ ë¡œì»¬ ì£¼ì†Œë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.

Ngrok ì‹¤í–‰ (ì˜µì…˜):

```bash
ngrok http 5000
local.properties ì„¤ì •: í”„ë¡œì íŠ¸ ë£¨íŠ¸ì˜ local.propertiesì— ì•„ë˜ ë‚´ìš©ì„ ì¶”ê°€í•©ë‹ˆë‹¤.
```

```properties
GEMINI_API_KEY=ì‚¬ìš©ì_GEMINI_API_KEY
API_BASE_URL=[https://ìƒì„±ëœ-ngrok-url.io/](https://ìƒì„±ëœ-ngrok-url.io/)  # ë¡œì»¬ í™˜ê²½: http://localhost:5000/
```
### 3. ì•± ì‹¤í–‰ (Run App)
Android Studio ë˜ëŠ” í„°ë¯¸ë„ì„ í†µí•´ ì•±ì„ ë¹Œë“œí•˜ê³  ì‹¤í–‰í•©ë‹ˆë‹¤.

```bash
./gradlew installDebug
4. ì„¤ì¹˜ ê²€ì¦ (Verification)
```

* ì„œë²„ ìƒíƒœ í™•ì¸: curl http://localhost:5000/health ëª…ë ¹ì–´ë¡œ status: healthy ì‘ë‹µ í™•ì¸.

* ì•± ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸: í”¼ë¶€ íƒ€ì… ì„ íƒ â†’ ì¹´ë©”ë¼ ê¶Œí•œ í—ˆìš© â†’ ì„±ë¶„í‘œ ì´¬ì˜ â†’ ë¶„ì„ ê²°ê³¼ ì¶œë ¥ í™•ì¸.

Tech Stack: Google ML Kit (OCR), Google Gemini AI, Supabase (PostgreSQL)
